# Schema for IDEA:
# $schema: https://schema.golem.cloud/app/golem/1.2.4/golem.schema.json
# Schema for vscode-yaml
# yaml-language-server: $schema=https://schema.golem.cloud/app/golem/1.2.4/golem.schema.json

# See https://learn.golem.cloud/docs/app-manifest#field-reference for field reference
# For creating APIs see https://learn.golem.cloud/invoke/making-custom-apis

components:
  swaggerui:shopping-cart:
    template: rust

httpApi:
  definitions:
    shopping-cart:
      version: '0.0.1'
      routes:
        - method: POST
          path: /v1/{user}/add-to-cart
          binding:
            type: default
            componentName: "swaggerui:shopping-cart"
            response: |
              let user: u32 = request.path.user;
              let worker = instance("cart-${user}");
              worker.add-item(request.body);
              "successfully added item to cart"
 
  deployments:
    local:
    - host: localhost:9006
      definitions:
       - shopping-cart/0.0.1
       
# Example for adding dependencies for Worker to Worker communication:
# See https://learn.golem.cloud/docs/app-manifest#fields_dependencies for more information
#
#dependencies:
#  swaggerui:shopping-cart:
#  - target: <target component name to be called>
#    type: wasm-rpc
